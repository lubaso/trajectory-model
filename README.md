# Synthetic Trajectory Data Generation from Mobility Simulation

### About this project
Computing spatial trajectories largely relies on traces generated by a moving object in geographical spaces (e.g. taxis, public transport and some individuals). [MATSim](https://matsim.org/) is a multi-agent transport simulation framework for large scale scenarios, which can generate data sets with specific properties for trajectory computing. This project aims at implementing MATSim scenarios to generate synthetic trajectory data and illustrate trajectory classification and trajectory clustering.

Therefore, this repository provides codes to rebuild and analyze synthetic trajectory data from the following MATSim scenarios:
- [Sioux Falls](https://github.com/matsim-org/matsim-libs/tree/master/examples/scenarios/siouxfalls-2014)
- [Berlin](https://github.com/matsim-scenarios/matsim-berlin)

To understand how to set up a simulation and run it, please refer to the respective repositories

Next, it will provide codes to illustrate trajectory clustering/classification using the synthetic trajectory data sets. 

### Recommended directory structure
* `src` for source codes. Usually, jupyter notebooks end with `*.ipynb`.
* `input` for input data (typically MATSim output data by MATSim runs, or by postprocessing) to rebuild and analyze the synthetic trajectories.
* `ouput` for ouput data, analysis data, and visualization (typically generated by the **codes files** or by postprocessing).


* `scenarios` for MATSim scenarios, i.e. MATSim input and output data.  A good way is the following:
  * One subdirectory for each scenario, e.g. `scenarios/mySpecialScenario01`.
  * This minimally contains a config file, a network file, and a population file.
  * Output goes one level down, e.g. `scenarios/mySpecialScenario01/output-from-a-good-run/...`.

### Note

Handling of large files within git is not without problems. As a result, large files, both on the input and on the output side, reside at [scenarios](https://drive.google.com/drive/folders/1Kt2SYL_bA1PIPoSjD1GAmznfhXixXX-M?usp=sharing) and [original-data](https://drive.google.com/drive/folders/1SJiGBydRR7oqegjmSKmWWHQ_FIxiKPu7?usp=sharing). 

### Rebuild the synthetic trajectory data

#### Alternative 1: use available raw trajectory data from [trajectory-model](https://github.com/lubaso/trajectory-model.git) repository
1. Clone the trajectory-model: https://github.com/lubaso/trajectory-model
2. Run the Jupyter Notebook `src/rebuild_trajectory.ipynb`

#### Alternative 2: generate raw trajectory data from [matsim-model](https://github.com/lubaso/matsim-model.git) repository
1. Clone the matsim-model: https://github.com/lubaso/matsim-model
2. Run the Java class `src/main/java/org/matsim/project/RunEventsSiouxFalls.java` or `src/main/java/org/matsim/project/RunEventsBerlin.java `
3. Clone the trajectory-model: https://github.com/lubaso/trajectory-model
4. Run the Jupyter Notebook `src/rebuild_trajectory.ipynb`

### Analyze the synthetic trajectory data and other MATSim output files 
* `TODO` 

### Trajectory clustering and classification
* `TODO` 
